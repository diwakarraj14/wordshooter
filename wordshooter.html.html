<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Shooter - DIA Limited</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            background: linear-gradient(135deg, #0a192f 0%, #172a45 100%);
            color: #e6f1ff;
            min-height: 100vh;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: opacity 0.5s ease;
            z-index: 10;
            overflow-y: auto;
        }

        .hidden {
            display: none;
        }

        .company-header {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 5;
        }

        .company-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: #64ffda;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 5px;
        }

        .company-tagline {
            font-size: 0.9rem;
            color: #8892b0;
            font-weight: 300;
            letter-spacing: 1px;
            position: fixed;
            bottom: 10px;
            width: 100%;
            text-align: center;
            font-style: normal;
        }

        h1 {
            font-size: clamp(2.5rem, 8vw, 3.5rem);
            margin-bottom: 2rem;
            text-align: center;
            background: linear-gradient(45deg, #64ffda, #00a8cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(100, 255, 218, 0.3);
            font-weight: 800;
        }

        h2 {
            font-size: clamp(2rem, 6vw, 2.5rem);
            margin-bottom: 1.5rem;
            color: #64ffda;
            text-align: center;
        }

        .form-container {
            background: rgba(23, 42, 69, 0.8);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.2);
            width: 100%;
            max-width: 450px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #ccd6f6;
            font-weight: 500;
        }

        input {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            background: rgba(10, 25, 47, 0.7);
            font-size: 1rem;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #e6f1ff;
            border: 1px solid #233554;
        }

        input:focus {
            outline: none;
            background: rgba(10, 25, 47, 0.9);
            box-shadow: 0 0 0 2px rgba(100, 255, 218, 0.5);
            border-color: #64ffda;
        }

        input::placeholder {
            color: #8892b0;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00a8cc, #007bff);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 168, 204, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(45deg, #dc3545, #c2185b);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
            color: black;
        }

        .link {
            color: #64ffda;
            cursor: pointer;
            text-decoration: underline;
            margin-top: 1rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .link:hover {
            color: #a8ffec;
        }

        .error {
            color: #ff6b6b;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            text-align: center;
            font-weight: 500;
        }

        /* Game Screen */
        #gameScreen {
            justify-content: flex-start;
            padding-top: 80px;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
            background: rgba(23, 42, 69, 0.8);
            padding: 15px 25px;
            border-radius: 10px;
            border: 1px solid rgba(100, 255, 218, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
            padding: 0 10px;
            margin: 5px;
            flex: 1;
            min-width: 70px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #64ffda;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #8892b0;
            font-weight: 500;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 60vh;
            min-height: 400px;
            background: rgba(10, 25, 47, 0.5);
            border: 2px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .word {
            position: absolute;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1.3rem;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            transition: transform 0.1s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 10;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .input-container {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 600px;
            text-align: center;
            z-index: 100;
        }

        #currentInput {
            width: 100%;
            padding: 18px;
            font-size: 1.3rem;
            text-align: center;
            background: rgba(23, 42, 69, 0.9);
            border: 2px solid #64ffda;
            border-radius: 30px;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(100, 255, 218, 0.2);
            color: #e6f1ff;
        }

        #currentInput::placeholder {
            color: #8892b0;
        }

        /* Menu Screen */
        .user-stats {
            background: rgba(23, 42, 69, 0.8);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            width: 100%;
            max-width: 500px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .stat-item {
            margin: 1.2rem 0;
            font-size: 1.3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-highlight {
            color: #64ffda;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .level-indicator {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            font-weight: bold;
        }

        /* Game Over Screen */
        .performance-feedback {
            background: rgba(23, 42, 69, 0.8);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            max-width: 600px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .suggestion {
            font-style: italic;
            color: #ccd6f6;
            margin-top: 1.5rem;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .level-progress {
            width: 100%;
            height: 20px;
            background: rgba(10, 25, 47, 0.7);
            border-radius: 10px;
            margin: 1rem 0;
            overflow: hidden;
            border: 1px solid #233554;
        }

        .level-progress-bar {
            height: 100%;
            background: linear-gradient(45deg, #64ffda, #00a8cc);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .floating {
            animation: float 4s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(100, 255, 218, 0.5); }
            50% { box-shadow: 0 0 20px rgba(100, 255, 218, 0.8); }
        }

        .glowing {
            animation: glow 2s ease-in-out infinite;
        }

        /* Background animation */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        /* DIA Brand Elements */
        .dia-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #64ffda, #00a8cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            color: #0a192f;
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.4);
        }

        .feature-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .feature {
            background: rgba(23, 42, 69, 0.8);
            padding: 15px;
            border-radius: 10px;
            width: 200px;
            text-align: center;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #64ffda;
        }

        /* Mobile-specific optimizations */
        @media (max-width: 768px) {
            .game-header {
                padding: 10px 15px;
            }
            
            .stat {
                padding: 0 5px;
                min-width: 60px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            .word {
                font-size: 1.1rem;
                padding: 8px 16px;
            }
            
            .user-stats {
                padding: 1.5rem;
            }
            
            .stat-item {
                font-size: 1.1rem;
            }
            
            .feature {
                width: 100%;
                max-width: 200px;
            }
            
            .form-container {
                padding: 1.5rem;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .game-header {
                justify-content: center;
            }
            
            .stat {
                min-width: 50px;
            }
            
            .stat-value {
                font-size: 1rem;
            }
            
            .stat-label {
                font-size: 0.65rem;
            }
            
            .word {
                font-size: 1rem;
                padding: 6px 12px;
            }
            
            #currentInput {
                font-size: 1.1rem;
                padding: 15px;
            }
            
            .company-name {
                font-size: 1.5rem;
            }
        }

        /* Virtual Keyboard for Mobile */
        .virtual-keyboard {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(23, 42, 69, 0.95);
            padding: 10px;
            border-top: 2px solid rgba(100, 255, 218, 0.3);
            z-index: 200;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 8px;
        }

        .keyboard-key {
            padding: 12px;
            margin: 3px;
            background: rgba(10, 25, 47, 0.8);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 5px;
            color: #e6f1ff;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .keyboard-key:active {
            background: rgba(100, 255, 218, 0.3);
            transform: scale(0.95);
        }

        .keyboard-space {
            flex-grow: 1;
            max-width: 200px;
        }

        /* Mobile Controls */
        .mobile-controls {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            z-index: 150;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(100, 255, 218, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            font-size: 1.5rem;
            color: #0a192f;
            font-weight: bold;
        }

        /* Show mobile controls on touch devices */
        @media (hover: none) and (pointer: coarse) {
            .mobile-controls {
                display: block;
            }
        }
    </style>
</head>
<body>
    
    <!-- Background stars -->
    <div class="stars" id="stars"></div>

    <!-- Company Header -->
    <div class="company-header">
        <div class="company-name">DIA GAMES!</div>
        <div class="company-tagline">Designed by Diwakar</div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="screen">
        <div class="dia-logo">DIA</div>
        <h1 class="floating">Word Shooter</h1>
        <div class="form-container glowing">
            <div class="form-group">
                <label for="loginEmail">Email:</label>
                <input type="email" id="loginEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password:</label>
                <input type="password" id="loginPassword" placeholder="Enter your password">
            </div>
            <button class="btn btn-primary" onclick="login()">Login</button>
            <div class="link" onclick="showScreen('registerScreen')">Don't have an account? Register here</div>
            <div id="loginError" class="error"></div>
        </div>
    </div>

    <!-- Register Screen -->
    <div id="registerScreen" class="screen hidden">
        <div class="dia-logo">DIA</div>
        <h1>Register</h1>
        <div class="form-container glowing">
            <div class="form-group">
                <label for="registerEmail">Email:</label>
                <input type="email" id="registerEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="registerPassword">Password:</label>
                <input type="password" id="registerPassword" placeholder="Enter your password">
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" id="confirmPassword" placeholder="Confirm your password">
            </div>
            <button class="btn btn-success" onclick="register()">Register</button>
            <div class="link" onclick="showScreen('loginScreen')">Back to Login</div>
            <div id="registerError" class="error"></div>
        </div>
    </div>

    <!-- Menu Screen -->
    <div id="menuScreen" class="screen hidden">
        <div class="dia-logo">DIA</div>
        <h1>Word Shooter</h1>
        
        <div class="feature-list">
            <div class="feature">
                <div class="feature-icon">âš¡</div>
                <h3>Speed Training</h3>
                <p>Improve your typing speed</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ðŸŽ¯</div>
                <h3>Accuracy Focus</h3>
                <p>Type with precision</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ðŸ“Š</div>
                <h3>Progress Tracking</h3>
                <p>Monitor your improvement</p>
            </div>
        </div>
        
        <div class="user-stats">
            <div class="stat-item">Welcome, <span id="userEmail" class="stat-highlight"></span></div>
            <div class="stat-item">Level: <span id="userLevel" class="stat-highlight level-indicator">1</span></div>
            <div class="stat-item">High Score: <span id="userHighScore" class="stat-highlight">0</span></div>
            <div class="stat-item">Average WPM: <span id="userAvgWPM" class="stat-highlight">0</span></div>
            <div class="stat-item">Total Words: <span id="userTotalWords" class="stat-highlight">0</span></div>
            <div class="level-progress">
                <div class="level-progress-bar" id="levelProgressBar" style="width: 0%"></div>
            </div>
            <div class="stat-item">Next Level: <span id="nextLevelScore" class="stat-highlight">100 points</span></div>
        </div>
        <button class="btn btn-primary" onclick="startGame()">Play Game</button>
        <button class="btn btn-danger" onclick="logout()">Logout</button>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen hidden">
        <div class="game-header">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">Level</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timeLeft">60</div>
                <div class="stat-label">Time</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="wordsLeft">10</div>
                <div class="stat-label">Words</div>
            </div>
        </div>
        
        <div class="game-container" id="gameContainer">
            <!-- Words will be dynamically added here -->
        </div>
        
        <div class="input-container">
            <input type="text" id="currentInput" placeholder="Type the words here and press Enter..." autocomplete="off">
        </div>
        
        <!-- Mobile Controls -->
        <div class="mobile-controls">
            <div class="control-btn" onclick="submitWord()">â†µ</div>
            <div class="control-btn" onclick="clearInput()">âŒ«</div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen hidden">
        <div class="dia-logo">DIA</div>
        <h1>Game Over!</h1>
        <div class="performance-feedback">
            <div class="stat-item">Final Score: <span id="finalScore" class="stat-highlight">0</span></div>
            <div class="stat-item">Words Per Minute: <span id="finalWPM" class="stat-highlight">0</span></div>
            <div class="stat-item">Accuracy: <span id="finalAccuracy" class="stat-highlight">100%</span></div>
            <div class="stat-item">Words Typed: <span id="finalWordsTyped" class="stat-highlight">0</span></div>
            <div class="suggestion" id="performanceSuggestion"></div>
        </div>
        <button class="btn btn-primary" onclick="showScreen('menuScreen')">Back to Menu</button>
        <button class="btn btn-success" onclick="startGame()">Play Again</button>
    </div>

    <!-- Virtual Keyboard (for mobile) -->
    <div class="virtual-keyboard" id="virtualKeyboard">
        <div class="keyboard-row">
            <div class="keyboard-key" data-key="q">q</div>
            <div class="keyboard-key" data-key="w">w</div>
            <div class="keyboard-key" data-key="e">e</div>
            <div class="keyboard-key" data-key="r">r</div>
            <div class="keyboard-key" data-key="t">t</div>
            <div class="keyboard-key" data-key="y">y</div>
            <div class="keyboard-key" data-key="u">u</div>
            <div class="keyboard-key" data-key="i">i</div>
            <div class="keyboard-key" data-key="o">o</div>
            <div class="keyboard-key" data-key="p">p</div>
        </div>
        <div class="keyboard-row">
            <div class="keyboard-key" data-key="a">a</div>
            <div class="keyboard-key" data-key="s">s</div>
            <div class="keyboard-key" data-key="d">d</div>
            <div class="keyboard-key" data-key="f">f</div>
            <div class="keyboard-key" data-key="g">g</div>
            <div class="keyboard-key" data-key="h">h</div>
            <div class="keyboard-key" data-key="j">j</div>
            <div class="keyboard-key" data-key="k">k</div>
            <div class="keyboard-key" data-key="l">l</div>
        </div>
        <div class="keyboard-row">
            <div class="keyboard-key" data-key="z">z</div>
            <div class="keyboard-key" data-key="x">x</div>
            <div class="keyboard-key" data-key="c">c</div>
            <div class="keyboard-key" data-key="v">v</div>
            <div class="keyboard-key" data-key="b">b</div>
            <div class="keyboard-key" data-key="n">n</div>
            <div class="keyboard-key" data-key="m">m</div>
            <div class="keyboard-key" data-key="backspace">âŒ«</div>
        </div>
        <div class="keyboard-row">
            <div class="keyboard-key keyboard-space" data-key=" ">Space</div>
            <div class="keyboard-key" data-key="enter">Enter</div>
        </div>
    </div>

    <script>
        // Enhanced word database with 1000+ words across 5 difficulty levels
        const wordDatabase = {
            1: [ // Level 1: Very Easy (3-4 letters, common words)
                "the", "and", "for", "are", "but", "not", "you", "all", "can", "had", "her", "was", "one", "our", "out", "get", "has", "him", "his", "how", "man", "new", "now", "old", "see", "two", "way", "who", "boy", "did", "its", "let", "put", "say", "she", "too", "use", "that", "with", "have", "this", "will", "your", "from", "they", "know", "want", "been", "good", "much", "some", "time", "very", "when", "come", "here", "just", "like", "long", "make", "many", "more", "only", "over", "such", "take", "than", "them", "well", "were", "what", "when", "where", "which", "while", "who", "will", "with", "would", "year", "you", "your", "about", "after", "again", "against", "away", "back", "because", "before", "being", "below", "between", "both", "call", "came", "come", "could", "does", "down", "each", "even", "first", "found", "give", "goes", "going", "great", "group", "have", "help", "here", "home", "house", "into", "just", "keep", "kind", "know", "large", "last", "left", "life", "line", "little", "look", "made", "make", "man", "may", "men", "might", "more", "most", "must", "name", "need", "never", "next", "night", "now", "number", "off", "often", "once", "only", "open", "other", "our", "out", "over", "own", "part", "people", "place", "put", "right", "said", "same", "saw", "say", "school", "see", "seem", "should", "show", "small", "so", "some", "something", "still", "such", "take", "tell", "than", "that", "the", "their", "them", "then", "there", "these", "they", "thing", "think", "this", "those", "through", "time", "to", "together", "too", "took", "under", "up", "us", "use", "used", "very", "want", "was", "way", "we", "well", "went", "were", "what", "when", "where", "which", "while", "who", "why", "will", "with", "work", "world", "would", "write", "year", "you", "your"
            ],
            2: [ // Level 2: Easy (5-6 letters, common words)
                "about", "above", "across", "after", "again", "against", "almost", "alone", "along", "already", "also", "although", "always", "among", "another", "answer", "anyone", "around", "asked", "because", "became", "become", "before", "behind", "being", "below", "better", "between", "beyond", "black", "books", "bring", "brought", "build", "built", "business", "called", "came", "cannot", "carry", "change", "children", "circle", "city", "close", "color", "common", "complete", "country", "course", "cover", "create", "dark", "decided", "different", "does", "doing", "dollar", "done", "door", "down", "during", "each", "early", "earth", "easily", "enough", "even", "every", "example", "eyes", "face", "fact", "family", "far", "father", "feel", "feet", "few", "field", "find", "first", "follow", "food", "form", "found", "friend", "from", "full", "game", "gave", "get", "girl", "give", "given", "go", "god", "good", "got", "great", "group", "grow", "had", "half", "hand", "happen", "hard", "has", "have", "head", "hear", "heard", "heart", "help", "her", "here", "high", "him", "himself", "his", "home", "house", "how", "however", "idea", "important", "inside", "into", "it", "its", "just", "keep", "kind", "knew", "know", "land", "large", "last", "later", "learn", "leave", "left", "less", "let", "letter", "life", "light", "like", "line", "list", "little", "live", "long", "look", "made", "make", "man", "many", "may", "mean", "men", "might", "mile", "mind", "more", "morning", "most", "mother", "move", "much", "must", "my", "name", "near", "need", "never", "new", "next", "night", "no", "not", "now", "number", "of", "off", "often", "old", "on", "once", "one", "only", "open", "or", "order", "other", "our", "out", "over", "own", "page", "paper", "part", "people", "person", "picture", "place", "plan", "play", "point", "possible", "power", "problem", "put", "question", "quick", "ran", "read", "real", "really", "right", "room", "run", "said", "same", "saw", "say", "school", "second", "see", "seem", "sentence", "set", "she", "should", "show", "side", "since", "small", "so", "some", "something", "soon", "sound", "special", "stand", "start", "state", "still", "stop", "story", "study", "such", "system", "take", "talk", "tell", "than", "that", "the", "their", "them", "then", "there", "these", "they", "thing", "think", "this", "those", "thought", "through", "time", "to", "today", "together", "too", "took", "top", "toward", "tree", "try", "turn", "two", "under", "until", "up", "us", "use", "used", "very", "walk", "want", "was", "water", "way", "we", "well", "went", "were", "what", "when", "where", "which", "while", "white", "who", "why", "will", "with", "without", "word", "work", "world", "would", "write", "year", "yes", "you", "young", "your"
            ],
            3: [ // Level 3: Medium (7-8 letters, common but longer words)
                "ability", "absence", "academy", "account", "achieve", "acquire", "across", "action", "activity", "actually", "addition", "address", "advance", "adventure", "advertise", "advice", "affect", "afford", "afraid", "afternoon", "against", "agency", "agreement", "almost", "already", "although", "always", "american", "analysis", "announce", "another", "anybody", "anything", "anywhere", "appear", "applied", "approach", "appropriate", "area", "argument", "around", "arrive", "article", "artist", "aspect", "assignment", "assume", "athlete", "attention", "attitude", "audience", "author", "average", "avoid", "award", "aware", "background", "balance", "beautiful", "because", "become", "before", "beginning", "behavior", "behind", "believe", "benefit", "better", "between", "beyond", "billion", "birthday", "brother", "business", "camera", "campaign", "candidate", "capital", "captain", "career", "careful", "carry", "category", "ceiling", "central", "century", "certain", "chairman", "challenge", "chance", "change", "character", "charge", "choice", "church", "circumstance", "citizen", "college", "color", "comfortable", "comment", "committee", "community", "company", "compare", "complete", "computer", "concern", "condition", "conference", "confidence", "confirm", "conflict", "consider", "constant", "consumer", "contain", "continue", "control", "conversation", "corner", "correct", "cost", "could", "country", "couple", "course", "create", "critical", "culture", "current", "customer", "daughter", "death", "debate", "decade", "decide", "decision", "defense", "degree", "deliver", "demand", "department", "depend", "describe", "design", "despite", "detail", "develop", "difference", "different", "difficult", "dinner", "direction", "director", "discover", "discuss", "disease", "display", "distance", "district", "divide", "doctor", "document", "during", "early", "economic", "education", "effect", "effort", "either", "election", "element", "else", "employee", "energy", "engine", "english", "enjoy", "enough", "enter", "entire", "environment", "especially", "establish", "evening", "event", "everybody", "everyone", "everything", "evidence", "exactly", "example", "excellent", "except", "exchange", "executive", "exercise", "exist", "expect", "experience", "explain", "express", "extend", "external", "facility", "factor", "family", "famous", "father", "favorite", "feature", "federal", "feeling", "field", "figure", "final", "financial", "finger", "finish", "floor", "focus", "follow", "foreign", "forget", "form", "former", "forward", "friend", "front", "function", "future", "garden", "general", "generation", "glass", "goal", "government", "great", "green", "ground", "group", "grow", "growth", "guess", "guy", "hair", "half", "hand", "happen", "happy", "hard", "have", "head", "health", "hear", "heart", "heavy", "help", "here", "herself", "high", "himself", "history", "hold", "home", "hope", "hospital", "hotel", "hour", "house", "however", "huge", "human", "hundred", "husband", "idea", "identify", "image", "imagine", "impact", "important", "improve", "include", "including", "increase", "indeed", "indicate", "individual", "industry", "information", "inside", "instead", "institution", "interest", "international", "interview", "introduce", "investment", "involve", "issue", "item", "itself", "join", "just", "keep", "key", "kid", "kill", "kind", "kitchen", "know", "knowledge", "language", "large", "last", "late", "laugh", "lawyer", "lead", "leader", "learn", "least", "leave", "left", "legal", "less", "letter", "level", "library", "life", "light", "like", "line", "list", "listen", "little", "live", "local", "long", "look", "lose", "loss", "love", "low", "machine", "magazine", "main", "maintain", "major", "majority", "make", "man", "manage", "management", "manager", "many", "market", "marriage", "material", "matter", "maybe", "mean", "measure", "media", "medical", "meet", "meeting", "member", "memory", "mention", "message", "method", "middle", "might", "military", "million", "mind", "minute", "miss", "model", "modern", "moment", "money", "month", "more", "morning", "most", "mother", "move", "movement", "movie", "much", "music", "must", "myself", "name", "nation", "national", "natural", "nature", "near", "nearly", "necessary", "need", "network", "never", "new", "news", "next", "nice", "night", "none", "north", "note", "nothing", "notice", "number", "occur", "offer", "office", "officer", "official", "often", "once", "only", "open", "operation", "opportunity", "option", "order", "organization", "other", "others", "outside", "over", "own", "owner", "page", "painting", "paper", "parent", "part", "particular", "partner", "party", "pass", "past", "patient", "pattern", "pay", "peace", "people", "percent", "perform", "performance", "perhaps", "period", "person", "personal", "phone", "physical", "picture", "piece", "place", "plan", "plant", "play", "player", "point", "police", "policy", "political", "politics", "poor", "popular", "population", "position", "positive", "possible", "power", "practice", "prepare", "present", "president", "pressure", "pretty", "prevent", "price", "private", "probably", "problem", "process", "produce", "product", "production", "professional", "professor", "program", "project", "property", "protect", "prove", "provide", "public", "pull", "purpose", "push", "put", "quality", "question", "quickly", "quite", "radio", "raise", "range", "rate", "rather", "reach", "read", "ready", "real", "reality", "realize", "really", "reason", "receive", "recent", "recently", "recognize", "record", "red", "reduce", "reflect", "region", "relationship", "religious", "remain", "remember", "remove", "report", "represent", "require", "research", "resource", "respond", "response", "responsibility", "rest", "result", "return", "reveal", "rich", "right", "rise", "risk", "road", "role", "room", "rule", "run", "safe", "same", "save", "say", "scene", "school", "science", "score", "sea", "season", "seat", "second", "section", "security", "see", "seek", "seem", "sell", "send", "senior", "sense", "series", "serious", "serve", "service", "set", "seven", "several", "sexual", "shake", "share", "she", "shoot", "short", "shot", "should", "show", "side", "sign", "significant", "similar", "simple", "simply", "since", "sing", "single", "sister", "sit", "site", "situation", "size", "skill", "skin", "small", "smile", "so", "social", "society", "soldier", "some", "somebody", "someone", "something", "sometimes", "son", "song", "soon", "sort", "sound", "source", "south", "space", "speak", "special", "specific", "speech", "spend", "sport", "spring", "staff", "stage", "stand", "standard", "star", "start", "state", "statement", "station", "stay", "step", "still", "stock", "stop", "store", "story", "strategy", "street", "strong", "structure", "student", "study", "stuff", "style", "subject", "success", "such", "suddenly", "suggest", "summer", "support", "sure", "surface", "system", "table", "take", "talk", "task", "tax", "teach", "teacher", "team", "technology", "television", "tell", "tend", "term", "test", "than", "thank", "that", "the", "their", "them", "themselves", "then", "theory", "there", "these", "they", "thing", "think", "third", "this", "those", "though", "thought", "thousand", "threat", "three", "through", "throughout", "throw", "thus", "time", "to", "today", "together", "tonight", "too", "top", "total", "toward", "town", "trade", "traditional", "training", "travel", "treat", "treatment", "tree", "trial", "trip", "trouble", "true", "truth", "try", "turn", "tv", "two", "type", "under", "understand", "unit", "until", "up", "upon", "us", "use", "usually", "value", "various", "very", "victim", "view", "violence", "visit", "voice", "vote", "wait", "walk", "wall", "want", "war", "watch", "water", "way", "we", "weapon", "wear", "week", "weight", "well", "west", "what", "whatever", "when", "where", "whether", "which", "while", "white", "who", "whole", "whom", "whose", "why", "wide", "wife", "will", "win", "wind", "window", "wish", "with", "within", "without", "woman", "wonder", "word", "work", "worker", "world", "worry", "would", "write", "writer", "wrong", "yard", "yeah", "year", "yes", "yet", "you", "young", "your", "yourself"
            ]
        };

        // Game state
        let gameState = {
            currentScreen: 'loginScreen',
            currentUser: null,
            level: 1,
            score: 0,
            words: [],
            currentInput: '',
            startTime: 0,
            wordsTyped: 0,
            totalChars: 0,
            wpm: 0,
            accuracy: 100,
            wordSpawnTimer: 0,
            wordSpawnDelay: 2000,
            gameTime: 60,
            timeLeft: 60,
            lastTimeUpdate: 0,
            gameInterval: null,
            maxWords: 10,
            wordsSpawned: 0,
            isMobile: false
        };

        // Create background stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 5 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Local storage for user data
        function initStorage() {
            if (!localStorage.getItem('wordShooterUsers')) {
                localStorage.setItem('wordShooterUsers', JSON.stringify({}));
            }
        }

        // User authentication functions
        function hashPassword(password) {
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString();
        }

        function isValidEmail(email) {
            const pattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return pattern.test(email);
        }

        function register() {
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const errorElement = document.getElementById('registerError');

            // Validation
            if (!email || !password || !confirmPassword) {
                errorElement.textContent = 'Please fill in all fields';
                return;
            }

            if (!isValidEmail(email)) {
                errorElement.textContent = 'Please enter a valid email address';
                return;
            }

            if (password !== confirmPassword) {
                errorElement.textContent = 'Passwords do not match';
                return;
            }

            if (password.length < 6) {
                errorElement.textContent = 'Password must be at least 6 characters long';
                return;
            }

            // Check if user already exists
            const users = JSON.parse(localStorage.getItem('wordShooterUsers'));
            if (users[email]) {
                errorElement.textContent = 'Email already registered';
                return;
            }

            // Create new user
            users[email] = {
                password: hashPassword(password),
                highScore: 0,
                level: 1,
                totalWords: 0,
                avgWPM: 0
            };

            localStorage.setItem('wordShooterUsers', JSON.stringify(users));
            
            // Auto-login
            loginUser(email, users[email]);
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorElement = document.getElementById('loginError');

            if (!email || !password) {
                errorElement.textContent = 'Please enter both email and password';
                return;
            }

            const users = JSON.parse(localStorage.getItem('wordShooterUsers'));
            const user = users[email];

            if (!user || user.password !== hashPassword(password)) {
                errorElement.textContent = 'Invalid email or password';
                return;
            }

            loginUser(email, user);
        }

        function loginUser(email, userData) {
            gameState.currentUser = {
                email: email,
                ...userData
            };
            
            updateUserStats();
            showScreen('menuScreen');
        }

        function logout() {
            gameState.currentUser = null;
            showScreen('loginScreen');
        }

        function updateUserStats() {
            if (gameState.currentUser) {
                document.getElementById('userEmail').textContent = gameState.currentUser.email;
                document.getElementById('userLevel').textContent = gameState.currentUser.level;
                document.getElementById('userHighScore').textContent = gameState.currentUser.highScore;
                document.getElementById('userAvgWPM').textContent = gameState.currentUser.avgWPM;
                document.getElementById('userTotalWords').textContent = gameState.currentUser.totalWords;
                
                // Update level progress
                const nextLevelScore = gameState.currentUser.level * 100;
                const progress = Math.min(100, (gameState.currentUser.highScore % nextLevelScore) / nextLevelScore * 100);
                document.getElementById('levelProgressBar').style.width = progress + '%';
                document.getElementById('nextLevelScore').textContent = (nextLevelScore - (gameState.currentUser.highScore % nextLevelScore)) + ' points';
            }
        }

        // Screen management
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            
            document.getElementById(screenId).classList.remove('hidden');
            gameState.currentScreen = screenId;

            // Clear errors when switching screens
            document.getElementById('loginError').textContent = '';
            document.getElementById('registerError').textContent = '';
            
            // Show/hide virtual keyboard
            if (screenId === 'gameScreen' && gameState.isMobile) {
                document.getElementById('virtualKeyboard').style.display = 'block';
            } else {
                document.getElementById('virtualKeyboard').style.display = 'none';
            }
        }

        // Game functions
        function startGame() {
            gameState.level = gameState.currentUser.level;
            gameState.score = 0;
            gameState.words = [];
            gameState.currentInput = '';
            gameState.startTime = Date.now();
            gameState.wordsTyped = 0;
            gameState.totalChars = 0;
            gameState.wpm = 0;
            gameState.accuracy = 100;
            gameState.wordSpawnTimer = 0;
            gameState.timeLeft = gameState.gameTime;
            gameState.lastTimeUpdate = Date.now();
            gameState.wordsSpawned = 0;
            gameState.maxWords = 10 + (gameState.level * 2);

            document.getElementById('score').textContent = '0';
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('timeLeft').textContent = gameState.timeLeft;
            document.getElementById('wpm').textContent = '0';
            document.getElementById('accuracy').textContent = '100%';
            document.getElementById('wordsLeft').textContent = gameState.maxWords;
            document.getElementById('currentInput').value = '';

            // Clear game container
            document.getElementById('gameContainer').innerHTML = '';

            showScreen('gameScreen');

            // Start game loop
            if (gameState.gameInterval) {
                clearInterval(gameState.gameInterval);
            }
            
            gameState.gameInterval = setInterval(updateGame, 1000 / 60);
        }

        function updateGame() {
            if (gameState.currentScreen !== 'gameScreen') return;

            const currentTime = Date.now();

            // Update timer
            if (currentTime - gameState.lastTimeUpdate >= 1000) {
                gameState.timeLeft--;
                gameState.lastTimeUpdate = currentTime;
                document.getElementById('timeLeft').textContent = gameState.timeLeft;

                // Calculate WPM
                const elapsedMinutes = (gameState.gameTime - gameState.timeLeft) / 60;
                if (elapsedMinutes > 0) {
                    gameState.wpm = Math.floor(gameState.wordsTyped / elapsedMinutes);
                    document.getElementById('wpm').textContent = gameState.wpm;
                }

                // Check for game over
                if (gameState.timeLeft <= 0 || gameState.wordsSpawned >= gameState.maxWords && gameState.words.length === 0) {
                    endGame();
                    return;
                }
            }

            // Spawn new words
            if (gameState.wordsSpawned < gameState.maxWords) {
                gameState.wordSpawnTimer += 1000 / 60;
                if (gameState.wordSpawnTimer >= gameState.wordSpawnDelay) {
                    spawnWord();
                    gameState.wordSpawnTimer = 0;
                    // Decrease spawn delay as level increases
                    gameState.wordSpawnDelay = Math.max(500, 2000 - (gameState.level * 200));
                }
            }

            // Update words
            gameState.words.forEach((word, index) => {
                word.y += word.speed;
                word.element.style.top = word.y + 'px';

                // Check if word reached bottom
                if (word.y > document.getElementById('gameContainer').offsetHeight) {
                    word.element.remove();
                    gameState.words.splice(index, 1);
                    gameState.accuracy = Math.max(0, gameState.accuracy - 5);
                    document.getElementById('accuracy').textContent = gameState.accuracy + '%';
                }
            });
        }

        function spawnWord() {
            const words = wordDatabase[gameState.level];
            if (!words || words.length === 0) return;

            const wordText = words[Math.floor(Math.random() * words.length)];
            const wordElement = document.createElement('div');
            wordElement.className = 'word';
            wordElement.textContent = wordText;
            
            // Color based on level
            const hue = 120 - (gameState.level * 20); // Green to red as level increases
            wordElement.style.background = `linear-gradient(45deg, hsl(${hue}, 70%, 60%), hsl(${hue + 30}, 70%, 50%))`;
            wordElement.style.boxShadow = `0 4px 15px hsla(${hue}, 70%, 50%, 0.4)`;
            
            // Random position
            const gameContainer = document.getElementById('gameContainer');
            const maxX = gameContainer.offsetWidth - 150;
            const x = Math.random() * maxX;
            wordElement.style.left = x + 'px';
            wordElement.style.top = '0px';

            // Add click event for mobile
            if (gameState.isMobile) {
                wordElement.addEventListener('click', function() {
                    document.getElementById('currentInput').value = wordText;
                });
            }

            gameContainer.appendChild(wordElement);

            gameState.words.push({
                text: wordText,
                element: wordElement,
                x: x,
                y: 0,
                speed: 1 + (gameState.level * 0.5)
            });

            gameState.wordsSpawned++;
            document.getElementById('wordsLeft').textContent = Math.max(0, gameState.maxWords - gameState.wordsSpawned);
        }

        function checkInput() {
            const input = gameState.currentInput.trim();
            if (!input) return false;

            for (let i = 0; i < gameState.words.length; i++) {
                const word = gameState.words[i];
                if (word.text === input) {
                    // Remove word
                    word.element.remove();
                    gameState.words.splice(i, 1);
                    
                    // Update score and stats
                    gameState.score += word.text.length * gameState.level;
                    gameState.wordsTyped++;
                    gameState.totalChars += word.text.length;
                    
                    document.getElementById('score').textContent = gameState.score;
                    
                    // Check for level up during game
                    if (gameState.score > gameState.level * 100 && gameState.level < 5) {
                        gameState.level++;
                        document.getElementById('level').textContent = gameState.level;
                    }
                    
                    return true;
                }
            }
            
            return false;
        }

        function submitWord() {
            if (checkInput()) {
                gameState.currentInput = '';
                document.getElementById('currentInput').value = '';
            }
        }

        function clearInput() {
            gameState.currentInput = '';
            document.getElementById('currentInput').value = '';
        }

        function endGame() {
            clearInterval(gameState.gameInterval);
            
            // Update user stats
            if (gameState.currentUser) {
                const users = JSON.parse(localStorage.getItem('wordShooterUsers'));
                const user = users[gameState.currentUser.email];
                
                // Update high score
                if (gameState.score > user.highScore) {
                    user.highScore = gameState.score;
                }
                
                // Update level if appropriate
                if (gameState.score > user.level * 100 && user.level < 5) {
                    user.level++;
                }
                
                // Update average WPM
                if (user.avgWPM > 0) {
                    user.avgWPM = Math.floor((user.avgWPM + gameState.wpm) / 2);
                } else {
                    user.avgWPM = gameState.wpm;
                }
                
                // Update total words
                user.totalWords += gameState.wordsTyped;
                
                localStorage.setItem('wordShooterUsers', JSON.stringify(users));
                gameState.currentUser = { email: gameState.currentUser.email, ...user };
            }
            
            // Show game over screen
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalWPM').textContent = gameState.wpm;
            document.getElementById('finalAccuracy').textContent = gameState.accuracy + '%';
            document.getElementById('finalWordsTyped').textContent = gameState.wordsTyped;
            
            // Performance feedback
            let feedback = '';
            if (gameState.wpm < 20) {
                feedback = 'Keep practicing! Try to focus on accuracy first. Start with Level 1 words to build confidence.';
            } else if (gameState.wpm < 40) {
                feedback = 'Good job! With more practice you can increase your speed. Try focusing on common letter combinations.';
            } else if (gameState.wpm < 60) {
                feedback = 'Great typing speed! You\'re becoming a proficient typist. Challenge yourself with higher levels.';
            } else {
                feedback = 'Excellent typing speed! You\'re a typing master! Consider practicing with specialized vocabulary.';
            }
            
            if (gameState.accuracy < 80) {
                feedback += ' Try to improve your accuracy by slowing down a bit and focusing on each word.';
            }
            
            if (gameState.level < 3) {
                feedback += ' You\'re doing well with basic words. Try advancing to higher levels for more challenge!';
            } else if (gameState.level >= 4) {
                feedback += ' Impressive! You\'re handling advanced vocabulary well. Keep challenging yourself!';
            }
            
            document.getElementById('performanceSuggestion').textContent = feedback;
            
            showScreen('gameOverScreen');
        }

        // Event listeners
        document.getElementById('currentInput').addEventListener('input', function(e) {
            gameState.currentInput = e.target.value;
        });

        document.getElementById('currentInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitWord();
            }
        });

        // Virtual keyboard functionality
        document.querySelectorAll('.keyboard-key').forEach(key => {
            key.addEventListener('click', function() {
                const keyValue = this.getAttribute('data-key');
                const inputField = document.getElementById('currentInput');
                
                if (keyValue === 'backspace') {
                    gameState.currentInput = gameState.currentInput.slice(0, -1);
                    inputField.value = gameState.currentInput;
                } else if (keyValue === 'enter') {
                    submitWord();
                } else if (keyValue === ' ') {
                    gameState.currentInput += ' ';
                    inputField.value = gameState.currentInput;
                } else {
                    gameState.currentInput += keyValue;
                    inputField.value = gameState.currentInput;
                }
                
                // Focus the input field
                inputField.focus();
            });
        });

        // Initialize the game
        window.onload = function() {
            createStars();
            initStorage();
            showScreen('loginScreen');
            
            // Detect mobile device
            gameState.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // Focus management for mobile
            if (gameState.isMobile) {
                const inputField = document.getElementById('currentInput');
                inputField.addEventListener('focus', function() {
                    // Scroll to input field on mobile
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                });
            }
        };
    </script>
</body>

